{% extends 'base.html' %}

{% block 'body' %}

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="{% url 'dashboard_secretaria' %}">Painel da Secretária</a>

    <div class="collapse navbar-collapse">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">

        <li class="nav-item">
          <a class="nav-link active" href="{% url 'cadastrar_pacientes' %}">Cadastrar Paciente</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="{% url 'agendamentos' %}">Realizar Agendamento</a>
        </li>

      </ul>

      <a href="{% url 'sair' %}" class="btn btn-danger">Sair</a>
    </div>
  </div>
</nav>

<br>

<div class="container">
  <h2>Cadastro de Pacientes</h2>

  {% if messages %}
    {% for message in messages %}
      <div class="alert {{ message.tags }}">{{ message }}</div>
    {% endfor %}
  {% endif %}

  <form action="{% url 'cadastrar_pacientes' %}" method="POST">
    {% csrf_token %}

    <label>Nome</label>
    <input type="text" name="nome" class="form-control" required>

    <br>

    <label>CPF</label>
    <input type="text" name="cpf" class="form-control" required>

    <br>

    <label>Telefone</label>
    <input type="text" name="telefone" class="form-control" required>

    <br>

    <label>Endereço</label>
    <input type="text" name="endereco" class="form-control" required>

    <br>

    <label>Data de Nascimento</label>
    <input type="date" name="data_nascimento" class="form-control" required>

    <br>

    <label>Observações</label>
    <textarea name="observacao" class="form-control"></textarea>

    <br>

    <input type="submit" value="Cadastrar" class="btn btn-success">
  </form>

  <hr>

  <h4>Pacientes cadastrados</h4>

  <table class="table table-striped">
    <thead>
      <tr>
        <th>Nome</th>
        <th>CPF</th>
        <th>Telefone</th>
        <th>Excluir</th>
      </tr>
    </thead>
    <tbody>
      {% for paciente in pacientes %}
      <tr>
        <td>{{ paciente.nome }}</td>
        <td>{{ paciente.cpf }}</td>
        <td>{{ paciente.telefone }}</td>
        <td>
          <a href="{% url 'excluir_paciente' paciente.id %}" class="btn btn-danger btn-sm">
            Excluir
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

</div>

{% endblock %}
